# 鸿蒙代码编辑器 - 完整功能版

## 🎯 项目简介

这是一个**真正可用的代码编辑器**，基于浏览器的 File System Access API 实现，可以打开本地文件夹进行代码编辑。专门为鸿蒙5系统设计，针对平板设备优化。

## ⚡ 核心功能

### 🗂️ 文件系统访问
- **打开文件夹**：使用系统文件选择器打开本地文件夹
- **文件树导航**：实时显示文件夹结构，支持展开/折叠
- **多文件编辑**：标签页支持同时编辑多个文件
- **保存文件**：直接保存到本地文件系统
- **新建文件**：在当前文件夹创建新文件
- **刷新文件树**：实时同步文件系统变化

### 📝 代码编辑
- **语法高亮**：支持 JavaScript、TypeScript、JSON、HTML 等
- **实时编辑**：所见即所得的代码编辑
- **行号显示**：自动生成行号并同步滚动
- **保存状态**：实时显示文件保存状态
- **文件图标**：根据文件类型显示不同图标

### 🎨 界面布局
- **左侧文件树**：树状结构展示，带箭头展开/折叠
- **中央编辑区**：带语法高亮的代码编辑器
- **顶部工具栏**：保存、撤销、格式化等常用操作
- **标签页系统**：多文件同时打开，快速切换
- **底部状态栏**：显示文件信息、编码、保存状态等

### ⌨️ 键盘快捷键
- `Ctrl+O` / `Cmd+O` - 打开文件夹
- `Ctrl+S` / `Cmd+S` - 保存当前文件
- `Ctrl+F` / `Cmd+F` - 打开搜索框

### 🎭 交互功能
1. **主题切换**：点击右上角月亮图标切换亮色/暗色主题
2. **文件选择**：点击文件树中的文件打开编辑
3. **标签管理**：点击标签切换文件，点击×关闭标签
4. **文件夹操作**：点击箭头展开/折叠文件夹
6. **工具栏操作**：保存、撤销、重做、格式化等

### 设计亮点

#### 鸿蒙设计语言
- **圆角系统**：8px/12px/16px 三级圆角
- **阴影层次**：3级阴影（sm/md/lg）营造空间感
- **色彩系统**：主色调 #0A59F7（鸿蒙蓝）
- **动画曲线**：cubic-bezier(0.4, 0, 0.2, 1) 流畅过渡

#### 视觉效果
- **卡片式设计**：主要区域采用卡片布局
- **悬停反馈**：按钮和列表项的悬停效果
- **渐变图标**：应用图标使用渐变色
- **进入动画**：侧边栏和编辑器的滑入动画

#### 代码高亮
- **多色高亮**：关键字、字符串、注释、函数、数字等
- **主题适配**：亮色和暗色主题不同的高亮配色
- **等宽字体**：Monaco/Menlo 专业代码字体

## 🎨 色彩规范

### 亮色主题
- 主色：#0A59F7
- 背景：#F1F3F5
- 卡片：#FFFFFF
- 文字：#182431
- 边框：#E4E7EB

### 暗色主题
- 背景：#1A1A1A
- 卡片：#262626
- 文字：#E8E8E8
- 边框：#3D3D3D

## 📐 尺寸规范

- **侧边栏宽度**：280px
- **标题栏高度**：72px
- **工具栏高度**：48px
- **状态栏高度**：32px
- **行号宽度**：60px
- **图标按钮**：40x40px
- **字体大小**：
  - 标题：20px
  - 正文：14px
  - 代码：14px (等宽)
  - 状态栏：12px

## 🚀 使用方法

### 快速开始
1. **打开编辑器**：在 Chrome 或 Edge 浏览器中打开 `code-editor-demo.html`
2. **打开文件夹**：
   - 点击顶部的 **📁 打开文件夹** 按钮
   - 或使用快捷键 `Ctrl+O` (Mac: `Cmd+O`)
   - 在弹出的系统文件选择器中选择要编辑的文件夹
3. **开始编辑**：
   - 在左侧文件树中点击文件打开
   - 在编辑器中修改代码
   - 使用 `Ctrl+S` 保存文件

### 浏览器兼容性
此编辑器使用了 **File System Access API**，需要以下浏览器版本：

✅ **支持的浏览器**
- Chrome 86+ 
- Edge 86+
- Opera 72+

❌ **不支持的浏览器**
- Firefox（暂不支持 File System Access API）
- Safari（暂不支持 File System Access API）

💡 **推荐使用**：Chrome 或 Edge 最新版本，以获得最佳体验。

### 功能演示
1. **打开文件夹**：选择任意项目文件夹
2. **编辑文件**：点击文件树中的文件开始编辑
3. **保存修改**：使用工具栏的保存按钮或 `Ctrl+S`
4. **新建文件**：点击文件树顶部的 ➕ 按钮
5. **刷新文件树**：点击工具栏的 🔄 按钮
6. **切换主题**：点击右上角的 🌙 图标

## 📱 平板适配

### 布局优化
- 适合 10-13 英寸平板屏幕
- 侧边栏可折叠（响应式）
- 充足的点击区域（最小44x44px）
- 横屏优化布局

### 触控优化
- 按钮大小适合手指点击
- 悬停效果支持触控
- 滚动区域流畅

## 🔄 转换为鸿蒙原生应用

虽然这是一个基于浏览器的代码编辑器，但可以作为鸿蒙原生开发的参考：

### 组件映射
| Web 组件 | 鸿蒙组件 | 说明 |
|---------|---------|------|
| 文件树 | List + ListItem | 使用递归组件实现树状结构 |
| 标签页 | Tabs + TabContent | 原生标签页组件 |
| 编辑器 | TextArea | 多行文本输入 + 自定义渲染 |
| 工具栏 | Row + Button | 水平布局 + 按钮组 |

### 核心技术实现
1. **文件系统访问**
   - 使用 `@ohos.file.fs` 模块访问文件系统
   - 使用 `picker` 模块选择文件夹
   - 需要申请文件访问权限

2. **动画实现**
   - 使用 `animateTo()` 实现过渡动画
   - 使用 `transition()` 实现元素进出动画
   - 使用 `curves` 曲线实现缓动效果

3. **性能优化**
   - 虚拟滚动处理大文件（LazyForEach）
   - 懒加载语法高亮
   - 防抖处理编辑事件

4. **状态管理**
   - 使用 `@State` 管理UI状态
   - 使用 `AppStorage` 持久化设置
   - 使用 `@Provide/@Consume` 跨组件通信

## 📝 技术栈

### 当前实现
- **HTML5**：结构布局
- **CSS3**：样式和动画
- **JavaScript ES6+**：交互逻辑和文件系统访问
- **File System Access API**：本地文件系统访问
- **字体**：Monaco、Menlo、HarmonyOS Sans

### 语法高亮支持
- JavaScript / TypeScript
- JSON
- HTML / XML
- Markdown
- 可扩展支持更多语言

## 🎓 设计参考

- 鸿蒙设计规范
- VSCode 界面布局
- Material Design 3.0
- iOS/iPadOS 设计语言

## ⚠️ 注意事项

1. **浏览器要求**：必须使用支持 File System Access API 的浏览器
2. **权限授予**：首次打开文件夹时需要授予权限
3. **文件过滤**：自动跳过 `node_modules`、`.git` 等大型目录
4. **性能限制**：大文件（>1MB）可能影响编辑性能
5. **保存提示**：编辑后记得保存，否则更改会丢失

## 🚀 后续改进方向

- [ ] 集成更强大的语法高亮库（如 Monaco Editor、CodeMirror）
- [ ] 支持代码补全和智能提示
- [ ] 实现搜索和替换功能
- [ ] 添加代码格式化工具
- [ ] 支持 Git 集成
- [ ] 添加终端支持
- [ ] 实现多光标编辑
- [ ] 支持代码片段
- [ ] 添加主题自定义

---

**项目状态**：✅ 完整功能的代码编辑器，可直接使用！

