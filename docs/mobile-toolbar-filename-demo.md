# 移动端工具栏文件名显示演示

## 视觉效果展示

### 1. 未修改状态
```
┌─────────────────────────────────────────┐
│                                         │
│  ☰        未命名.js        ⋮           │  ← 56dp 高度
│                                         │
└─────────────────────────────────────────┘
   ↑            ↑              ↑
  44vp      文件名显示       44vp
  文件      (居中对齐)       菜单
  浏览器                     按钮
  按钮
```

### 2. 已修改状态
```
┌─────────────────────────────────────────┐
│                                         │
│  ☰       未命名.js •       ⋮           │  ← 修改标识
│                                         │
└─────────────────────────────────────────┘
                    ↑
              修改指示符 (•)
```

### 3. 长文件名处理
```
┌─────────────────────────────────────────┐
│                                         │
│  ☰  very-long-file-na... •  ⋮          │  ← 自动截断
│                                         │
└─────────────────────────────────────────┘
              ↑
        使用省略号 (...)
```

### 4. 中文文件名
```
┌─────────────────────────────────────────┐
│                                         │
│  ☰       我的代码.ets •     ⋮           │  ← 支持中文
│                                         │
└─────────────────────────────────────────┘
```

## 交互流程

### 点击文件名区域
```
用户操作: 点击 "未命名.js •"
    ↓
触发事件: onClick()
    ↓
执行动作: this.showTabManager = true
    ↓
显示结果: 打开标签管理底部面板
```

### 文件修改流程
```
初始状态: 未命名.js
    ↓
用户编辑: 输入代码
    ↓
触发更新: onContentChange()
    ↓
状态变化: isModified = true
    ↓
显示更新: 未命名.js •
```

### 保存文件流程
```
当前状态: 未命名.js •
    ↓
用户操作: 点击保存按钮
    ↓
保存成功: saveFile()
    ↓
状态重置: isModified = false
    ↓
显示更新: 未命名.js
```

## 代码实现细节

### 核心代码
```typescript
// 中间：文件名（可点击）
Text(this.fileName + (this.isModified ? ' •' : ''))
  .fontSize(16)                                    // 字体大小
  .fontWeight(FontWeight.Medium)                   // 字体粗细
  .fontColor(this.currentTheme.colors.text)        // 主题颜色
  .layoutWeight(1)                                 // 占据剩余空间
  .textAlign(TextAlign.Center)                     // 居中对齐
  .maxLines(1)                                     // 单行显示
  .textOverflow({ overflow: TextOverflow.Ellipsis }) // 溢出省略
  .onClick(() => {
    this.showTabManager = true;                    // 打开标签管理
  })
```

### 状态管理
```typescript
// 文件名状态
@State fileName: string = '未命名';

// 修改状态
@State isModified: boolean = false;

// 标签管理面板显示状态
@State showTabManager: boolean = false;
```

### 显示逻辑
```typescript
// 拼接显示文本
const displayText = this.fileName + (this.isModified ? ' •' : '');

// 示例:
// fileName = "test.js", isModified = false → "test.js"
// fileName = "test.js", isModified = true  → "test.js •"
```

## 样式规范

### 字体
- **大小**: 16sp (移动端标准)
- **粗细**: Medium (500)
- **颜色**: 主题文本颜色 (自适应深浅色)

### 布局
- **对齐**: 水平居中
- **宽度**: 自适应 (layoutWeight: 1)
- **高度**: 56dp (工具栏高度)
- **内边距**: 左右各 8dp

### 文本处理
- **最大行数**: 1 行
- **溢出**: 使用省略号 (...)
- **换行**: 不换行

## 主题适配

### 浅色主题
```
背景色: #FFFFFF
文字色: #000000
边框色: #E0E0E0
```

### 深色主题
```
背景色: #1E1E1E
文字色: #FFFFFF
边框色: #3E3E3E
```

### 鸿蒙主题
```
背景色: #F5F5F5
文字色: #182431
边框色: #E5E5E5
```

## 响应式行为

### 小屏手机 (< 360dp)
- 文件名区域宽度: 约 240dp
- 字体大小: 16sp
- 按钮大小: 44x44 vp

### 中屏手机 (360-480dp)
- 文件名区域宽度: 约 280dp
- 字体大小: 16sp
- 按钮大小: 44x44 vp

### 大屏设备 (> 480dp)
- 不显示移动端工具栏
- 使用桌面端工具栏布局

## 无障碍支持

### 触摸热区
- 文件名区域: 整个中间区域可点击
- 最小热区: 44x44 vp (符合 HarmonyOS 规范)

### 语义化
- 组件类型: Text (可点击)
- 交互反馈: 点击后打开标签管理

## 测试场景

### 功能测试
1. ✅ 显示默认文件名 "未命名"
2. ✅ 显示自定义文件名
3. ✅ 显示修改标识 •
4. ✅ 点击打开标签管理
5. ✅ 长文件名截断

### 边界测试
1. ✅ 空文件名处理
2. ✅ 特殊字符文件名
3. ✅ 超长文件名 (100+ 字符)
4. ✅ 中文文件名
5. ✅ 混合语言文件名

### 性能测试
1. ✅ 快速切换标签
2. ✅ 频繁修改状态
3. ✅ 主题切换响应

## 用户体验

### 优点
1. **直观**: 一眼看出当前文件和修改状态
2. **简洁**: 信息密度适中，不拥挤
3. **高效**: 点击即可管理标签
4. **美观**: 符合移动端设计规范

### 改进建议
1. 可考虑添加文件类型图标
2. 可考虑添加触摸反馈动画
3. 可考虑添加长按显示完整文件名

## 总结

移动端工具栏文件名显示功能实现完整，满足所有设计要求和验收标准。实现简洁高效，用户体验良好，完全符合 HarmonyOS 移动端设计规范。
