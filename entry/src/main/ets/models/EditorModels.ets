/**
 * æ–‡ä»¶èŠ‚ç‚¹æ¨¡å‹
 * ç”¨äºè¡¨ç¤ºæ–‡ä»¶æ ‘ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
 */
export interface FileNode {
  id: string                    // å”¯ä¸€æ ‡è¯†
  name: string                  // æ–‡ä»¶å
  path: string                  // å®Œæ•´è·¯å¾„
  type: 'file' | 'folder'       // ç±»å‹
  extension?: string            // æ–‡ä»¶æ‰©å±•å
  children?: FileNode[]         // å­èŠ‚ç‚¹ï¼ˆä»…æ–‡ä»¶å¤¹ï¼‰
  size?: number                 // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  modifiedTime?: number         // ä¿®æ”¹æ—¶é—´æˆ³
}

/**
 * ç¼–è¾‘å™¨æ ‡ç­¾æ¨¡å‹
 */
export interface EditorTab {
  id: string                    // å”¯ä¸€æ ‡è¯†
  fileId: string                // å…³è”çš„æ–‡ä»¶ID
  fileName: string              // æ–‡ä»¶å
  filePath: string              // æ–‡ä»¶è·¯å¾„
  content: string               // æ–‡ä»¶å†…å®¹
  language: string              // ç¼–ç¨‹è¯­è¨€
  isDirty: boolean              // æ˜¯å¦æœ‰æœªä¿å­˜çš„ä¿®æ”¹
  cursorLine: number            // å…‰æ ‡è¡Œ
  cursorColumn: number          // å…‰æ ‡åˆ—
  scrollPosition: number        // æ»šåŠ¨ä½ç½®
}

/**
 * è¯­æ³•Tokenç±»å‹
 */
export type TokenType =
  | 'keyword' | 'string' | 'number' | 'comment'
  | 'function' | 'class' | 'variable' | 'property'
  | 'operator' | 'decorator' | 'type' | 'punctuation'
  | 'plain'

/**
 * è¯­æ³•é«˜äº®Token
 */
export interface SyntaxToken {
  type: TokenType
  value: string
  start: number
  end: number
}

/**
 * ä¸»é¢˜é¢œè‰²é…ç½®
 */
export interface ThemeColors {
  // ä¸»è‰²è°ƒ
  primary: string
  primaryLight: string

  // èƒŒæ™¯è‰²
  background: string
  surface: string
  surfaceVariant: string
  sidebarBg: string

  // æ–‡å­—é¢œè‰²
  textPrimary: string
  textSecondary: string
  textDisabled: string

  // è¾¹æ¡†å’Œåˆ†å‰²çº¿
  border: string
  divider: string

  // äº¤äº’çŠ¶æ€
  hover: string
  active: string
  pressed: string

  // ç¼–è¾‘å™¨
  editorBg: string
  lineNumberBg: string
  lineNumber: string
  currentLineBg: string
  selection: string

  // è¯­æ³•é«˜äº®
  syntaxKeyword: string
  syntaxString: string
  syntaxNumber: string
  syntaxComment: string
  syntaxFunction: string
  syntaxClass: string
  syntaxVariable: string
  syntaxOperator: string
  syntaxDecorator: string
  syntaxPunctuation: string
}

/**
 * ä¸»é¢˜é…ç½®
 */
export interface Theme {
  name: string
  isDark: boolean
  colors: ThemeColors
}

/**
 * åˆ›å»ºç¤ºä¾‹æ–‡ä»¶æ ‘
 */
export function createSampleFileTree(): FileNode {
  return {
    id: 'root',
    name: 'my-project',
    path: '/my-project',
    type: 'folder',
    children: [
      {
        id: 'src',
        name: 'src',
        path: '/my-project/src',
        type: 'folder',
        children: [
          {
            id: 'pages',
            name: 'pages',
            path: '/my-project/src/pages',
            type: 'folder',
            children: [
              { id: 'index', name: 'Index.ets', path: '/my-project/src/pages/Index.ets', type: 'file', extension: 'ets', size: 2048 },
              { id: 'home', name: 'HomePage.ets', path: '/my-project/src/pages/HomePage.ets', type: 'file', extension: 'ets', size: 3512 },
              { id: 'settings', name: 'Settings.ets', path: '/my-project/src/pages/Settings.ets', type: 'file', extension: 'ets', size: 1824 }
            ]
          },
          {
            id: 'components',
            name: 'components',
            path: '/my-project/src/components',
            type: 'folder',
            children: [
              { id: 'button', name: 'Button.ets', path: '/my-project/src/components/Button.ets', type: 'file', extension: 'ets', size: 1256 },
              { id: 'card', name: 'Card.ets', path: '/my-project/src/components/Card.ets', type: 'file', extension: 'ets', size: 892 }
            ]
          },
          {
            id: 'services',
            name: 'services',
            path: '/my-project/src/services',
            type: 'folder',
            children: [
              { id: 'api', name: 'ApiService.ts', path: '/my-project/src/services/ApiService.ts', type: 'file', extension: 'ts', size: 4096 },
              { id: 'storage', name: 'StorageService.ts', path: '/my-project/src/services/StorageService.ts', type: 'file', extension: 'ts', size: 2048 }
            ]
          },
          { id: 'main', name: 'main.ets', path: '/my-project/src/main.ets', type: 'file', extension: 'ets', size: 512 }
        ]
      },
      {
        id: 'resources',
        name: 'resources',
        path: '/my-project/resources',
        type: 'folder',
        children: [
          { id: 'config', name: 'config.json', path: '/my-project/resources/config.json', type: 'file', extension: 'json', size: 256 }
        ]
      },
      { id: 'readme', name: 'README.md', path: '/my-project/README.md', type: 'file', extension: 'md', size: 1024 },
      { id: 'package', name: 'package.json', path: '/my-project/package.json', type: 'file', extension: 'json', size: 512 }
    ]
  }
}

/**
 * ç¤ºä¾‹ä»£ç å†…å®¹
 */
export const SampleCodeContents: Record<string, string> = {
  'Index.ets': `import { router } from '@kit.ArkUI'
import { HomePage } from './HomePage'

@Entry
@Component
struct Index {
  @State message: string = 'Hello World'
  @State count: number = 0

  build() {
    Column() {
      Text(this.message)
        .fontSize(32)
        .fontWeight(FontWeight.Bold)
        .fontColor('#333333')
        .margin({ bottom: 20 })

      Button('ç‚¹å‡»è®¡æ•°: ' + this.count)
        .fontSize(18)
        .width(200)
        .height(50)
        .backgroundColor('#0A59F7')
        .borderRadius(25)
        .onClick(() => {
          this.count++
        })

      Button('è·³è½¬é¦–é¡µ')
        .fontSize(16)
        .margin({ top: 20 })
        .onClick(() => {
          router.pushUrl({ url: 'pages/HomePage' })
        })
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .backgroundColor('#F5F5F5')
  }
}`,

  'HomePage.ets': `@Component
export struct HomePage {
  @State title: string = 'é¦–é¡µ'
  @State items: string[] = ['é¡¹ç›®1', 'é¡¹ç›®2', 'é¡¹ç›®3']

  build() {
    Column() {
      // é¡¶éƒ¨æ ‡é¢˜æ 
      Row() {
        Text(this.title)
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
      }
      .width('100%')
      .height(56)
      .padding({ left: 16, right: 16 })
      .backgroundColor('#FFFFFF')

      // åˆ—è¡¨å†…å®¹
      List() {
        ForEach(this.items, (item: string, index: number) => {
          ListItem() {
            Text(item)
              .fontSize(16)
              .padding(16)
          }
        })
      }
      .layoutWeight(1)
    }
    .width('100%')
    .height('100%')
  }
}`,

  'README.md': `# My HarmonyOS Project

## ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ ArkTS å¼€å‘çš„é¸¿è’™åº”ç”¨é¡¹ç›®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ é«˜æ€§èƒ½æ¸²æŸ“
- ğŸ¨ ç²¾ç¾UIè®¾è®¡
- ğŸ“± å¤šè®¾å¤‡é€‚é…

## å¼€å§‹ä½¿ç”¨

\`\`\`bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œé¡¹ç›®
npm run dev
\`\`\`

## ç›®å½•ç»“æ„

\`\`\`
src/
â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”œâ”€â”€ components/     # é€šç”¨ç»„ä»¶
â”œâ”€â”€ services/       # æœåŠ¡å±‚
â””â”€â”€ main.ets        # å…¥å£æ–‡ä»¶
\`\`\`
`
}
